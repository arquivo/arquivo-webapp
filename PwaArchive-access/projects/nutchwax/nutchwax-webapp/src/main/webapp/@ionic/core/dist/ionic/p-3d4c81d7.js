import{b as e}from"./p-1074393c.js";let t=0;const n=e=>({create:t=>m(e,t),dismiss:(t,n,i)=>p(document,t,n,e,i),getTop:async()=>u(document,e)}),i=n("ion-alert"),o=n("ion-action-sheet"),s=n("ion-loading"),a=n("ion-modal"),r=n("ion-picker"),d=n("ion-popover"),c=n("ion-toast"),m=(e,n)=>customElements.whenDefined(e).then(()=>{const i=document,o=i.createElement(e);l(i),Object.assign(o,n),o.classList.add("overlay-hidden");const s=t++;return o.overlayIndex=s,o.hasAttribute("id")||(o.id=`ion-overlay-${s}`),f(i).appendChild(o),o.componentOnReady()}),l=e=>{0===t&&(t=1,e.addEventListener("focusin",t=>{const n=u(e);if(n&&n.backdropDismiss&&!E(n,t.target)){const e=n.querySelector("input,button");e&&e.focus()}}),e.addEventListener("ionBackButton",t=>{const n=u(e);n&&n.backdropDismiss&&t.detail.register(100,()=>n.dismiss(void 0,k))}),e.addEventListener("keyup",t=>{if("Escape"===t.key){const t=u(e);t&&t.backdropDismiss&&t.dismiss(void 0,k)}}))},p=(e,t,n,i,o)=>{const s=u(e,i,o);return s?s.dismiss(t,n):Promise.reject("overlay does not exist")},u=(e,t,n)=>{const i=((e,t)=>{const n=Array.from(f(e).children).filter(e=>e.overlayIndex>0);return void 0===t?n:(t=t.toUpperCase(),n.filter(e=>e.tagName===t))})(e,t);return void 0===n?i[i.length-1]:i.find(e=>e.id===n)},v=async(t,n,i,o,s)=>{if(t.presented)return;t.presented=!0,t.willPresent.emit();const a=t.enterAnimation?t.enterAnimation:e.get(n,"ios"===t.mode?i:o);await h(t,a,t.el,s)&&t.didPresent.emit()},y=async(t,n,i,o,s,a,r)=>{if(!t.presented)return!1;t.presented=!1;try{t.willDismiss.emit({data:n,role:i});const d=t.leaveAnimation?t.leaveAnimation:e.get(o,"ios"===t.mode?s:a);await h(t,d,t.el,r),t.didDismiss.emit({data:n,role:i})}catch(e){console.error(e)}return t.el.remove(),!0},f=e=>e.querySelector("ion-app")||e.body,h=async(t,n,i,o)=>{if(t.animation)return t.animation.destroy(),t.animation=void 0,!1;i.classList.remove("overlay-hidden");const s=i.shadowRoot||t.el,a=await __sc_import_ionic("./p-8ec7f6e0.js").then(e=>e.create(n,s,o));t.animation=a,t.animated&&e.getBoolean("animated",!0)||a.duration(0),t.keyboardClose&&a.beforeAddWrite(()=>{const e=i.ownerDocument.activeElement;e&&e.matches("input, ion-input, ion-textarea")&&e.blur()}),await a.playAsync();const r=a.hasCompleted;return a.destroy(),t.animation=void 0,r},b=(e,t)=>{let n;const i=new Promise(e=>n=e);return g(e,t,e=>{n(e.detail)}),i},g=(e,t,n)=>{const i=o=>{e.removeEventListener(t,i),n(o)};e.addEventListener(t,i)},w=e=>"cancel"===e||e===k,E=(e,t)=>{for(;t;){if(t===e)return!0;t=t.parentElement}return!1},k="backdrop";export{k as B,i as a,o as b,d as c,v as d,y as e,b as f,m as g,p as h,w as i,u as j,s as l,a as m,r as p,c as t};